!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o,i,u){var a,c,s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c=function(){s.element.remove(),s.element=null},(a="removeCard")in this?Object.defineProperty(this,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):this[a]=c,this._image=e.link,this._title=e.name,this._likes=e.likes,this._template=n,this._userId=i,this._imageOwnerId=e.owner._id,this._handleCardClick=r,this._handleDeleteClick=o,this._handleLikeClick=u}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._template).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this.element=this._getTemplate(),this.element.querySelector(".element__img").src=this._image,this.element.querySelector(".element__img").alt=this._title,this.element.querySelector(".element__container-heading").textContent=this._title,this.element.querySelector(".image-likes").textContent=this._likes.length,this._imageOwnerId===this._userId&&(this.element.querySelector(".element__delete").style.visibility="visible"),this.isLiked()&&this.element.querySelector(".heart-button").classList.add("heart-button_active"),this._setEventListeners(),this.element}},{key:"cardLike",value:function(e){this._likes=e,this.element.querySelector(".image-likes").textContent=this._likes.length,this.element.querySelector(".heart-button").classList.add("heart-button_active")}},{key:"cardDislike",value:function(){this.element.querySelector(".image-likes").textContent--,this.element.querySelector(".heart-button").classList.remove("heart-button_active")}},{key:"_setEventListeners",value:function(){var e=this;this.element.querySelector(".heart-button").addEventListener("click",(function(){return e._handleLikeClick()})),this.element.querySelector(".element__img").addEventListener("click",(function(){return e._handleCardClick()})),this.element.querySelector(".element__delete").addEventListener("click",(function(){return e._handleDeleteClick()}))}},{key:"isLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._settingsObject=t,this._formElement=n}var t,r;return t=e,(r=[{key:"enableValidation",value:function(){var e=this._settingsObject.submitButtonSelector;this._formElement.addEventListener(e,(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"_setEventListeners",value:function(){var e=this,t=this._settingsObject,n=t.inputSelector,r=t.submitButtonSelector,o=Array.from(this._formElement.querySelectorAll(n)),i=this._formElement.querySelector(r);this._toggleButtonState(o,i),o.forEach((function(t){t.addEventListener("input",(function(){e._isValid(t),e._toggleButtonState(o,i)}))}))}},{key:"_showInputError",value:function(e){var t=e.validationMessage,n=this._settingsObject,r=n.inputErrorClass,o=n.errorClass,i=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(r),i.textContent=t,i.classList.add(o)}},{key:"_hideInputError",value:function(e){var t=this._settingsObject,n=t.inputErrorClass,r=t.errorClass,o=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(n),o.classList.remove(r),o.textContent=""}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){var n=this._settingsObject.inactiveButtonClass;this._hasInvalidInput(e)?(t.classList.add(n),t.setAttribute("disabled",!0)):(t.classList.remove(n),t.removeAttribute("disabled",!0))}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),i(this,"_closePopupWithOverlay",(function(e){e.target===e.currentTarget&&n.close()})),this._popupElement=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_open"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.querySelector(".popup__close").addEventListener("click",(function(){return e.close()})),this._popupElement.addEventListener("mousedown",this._closePopupWithOverlay)}}])&&o(t.prototype,n),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},l(e,t,n||e)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function u(){return c(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"open",value:function(e,t){var n=this._popupElement.querySelector(".popup-image__image"),r=this._popupElement.querySelector(".popup-image__name");n.src=e,r.textContent=t,l(h(u.prototype),"open",this).call(this)}}])&&s(t.prototype,n),u}(u);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function g(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},S(e,t,n||e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function u(e,t){var n,r,o,a,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),c=function(){S((n=E(r),k(u.prototype)),"setEventListeners",n).call(n),r._form.addEventListener("submit",(function(e){r._form.querySelector(".popup__button").textContent="Saving...",r._submitHandler(r._getInputValues()),e.preventDefault()}))},(a="setEventListeners")in(o=E(r=i.call(this,e)))?Object.defineProperty(o,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[a]=c,r._submitHandler=t,r._form=r._popupElement.querySelector(".popup__form"),r}return t=u,(n=[{key:"_getInputValues",value:function(){var e=m(this._form.querySelectorAll(".popup__input")),t={};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"setForminputs",value:function(){m(this._form.querySelectorAll(".popup__input"))}},{key:"close",value:function(){S(k(u.prototype),"close",this).call(this),this._form.reset(),this._form.querySelector(".popup__button").textContent="Save",this._form.querySelector(".popup__button").setAttribute("disabled",!0),this._form.querySelector(".popup__button").classList.add("popup__button_disabled")}}])&&_(t.prototype,n),u}(u);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function j(e,t){return j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},j(e,t)}function C(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t,n){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},q(e,t,n||e)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=I(t);if(n){var o=I(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return C(this,e)});function o(e,t){var n,i,u,a,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),c=function(){q((n=L(i),I(o.prototype)),"setEventListeners",n).call(n),i._form.addEventListener("submit",(function(e){e.preventDefault(),i._submitHandler()}))},(a="setEventListeners")in(u=L(i=r.call(this,e)))?Object.defineProperty(u,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[a]=c,i._submitHandler=t,i._form=i._popupElement.querySelector(".popup__form"),i}return o}(u);function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameSelector=document.querySelector(t),this._jobSelector=document.querySelector(n),this._avatarSelector=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._nameSelector.textContent,job:this._jobSelector.textContent}}},{key:"setUserInfo",value:function(e,t,n){this._nameSelector.textContent=e,this._jobSelector.textContent=t,this._avatarSelector.src=n}},{key:"setAvatarImage",value:function(e){this._avatarSelector.src=e}}])&&R(t.prototype,n),e}();function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.append(e)}},{key:"prependItem",value:function(e){this._container.prepend(e)}}])&&D(t.prototype,n),e}(),A={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},x=document.querySelector(".profile__add-button"),B=document.querySelector(".profile__avatar-overlay"),V=document.querySelector(".profile__info-edit"),H=document.querySelector("#popup-profile__form"),N=document.querySelector("#popup-avataredit__form"),J=(document.querySelector("#popup-profile__form-input_name"),document.querySelector("#popup-profile__form-input_job"),document.querySelector("#popup-card__form"));function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var W=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}var t,n;return t=e,(n=[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"setUserInfo",value:function(e,t){var n=this;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return n._getResponseData(e)}))}},{key:"setAvatarImage",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:"".concat(e)})}).then((function(e){return t._getResponseData(e)}))}},{key:"addNewCard",value:function(e,t){var n=this;return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return n._getResponseData(e)}))}},{key:"removeCard",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return t._getResponseData(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers}).then((function(e){return t._getResponseData(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return t._getResponseData(e)}))}}])&&M(t.prototype,n),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"9d69919a-c5e6-499a-8de5-d578571e9e77","Content-Type":"application/json"}}),z=new w(".popup-avataredit",(function(e){W.setAvatarImage(e["popup-avataredit-profile-link-input"]).then((function(){F.setAvatarImage(e["popup-avataredit-profile-link-input"])})).then((function(){return z.close()})).catch((function(e){return console.log("Error: ".concat(e))}))})),F=new T(".profile__info-heading",".profile__info-description",".profile__avatar"),$=new d(".popup-image"),G=new w(".popup-profile",(function(e){W.setUserInfo(e["popup-profile-profile-name-input"],e["popup-profile-job-input"]).then((function(e){F.setUserInfo(e.name,e.about,e.avatar)})).then((function(){return G.close()})).catch((function(e){return console.log("Error: ".concat(e))}))}));$.setEventListeners(),z.setEventListeners(),G.setEventListeners(),V.addEventListener("click",(function(){var e=F.getUserInfo();W.getUserInfo().then((function(t){document.querySelector("#popup-profile__form-input_name").value=e.name,document.querySelector("#popup-profile__form-input_job").value=e.job})).catch((function(e){return console.log("Error: ".concat(e))})),G.open()})),B.addEventListener("click",(function(){z.open()})),W.getUserInfo().then((function(e){F.setUserInfo(e.name,e.about,e.avatar);var n=function(n){var r=new t(n,"#element-template",(function(){$.open(n.link,n.name)}),(function(){var e=new P(".popup-delete",(function(){W.removeCard(n._id).then((function(){r.removeCard()})).then((function(){return e.close()})).catch((function(e){return console.log("Error: ".concat(e))}))}));e.setEventListeners(),e.open()}),e._id,(function(){r.isLiked()?W.removeLike(n._id).then((function(e){r.cardDislike(e.likes)})).catch((function(e){return console.log("Error: ".concat(e))})):W.addLike(n._id).then((function(e){r.cardLike(e.likes)})).catch((function(e){return console.log("Error: ".concat(e))}))}));return r.generateCard()};W.getInitialCards().then((function(e){var t=new U({items:e,renderer:function(e){t.addItem(n(e))}},".elements");t.renderItems();var r=new w(".popup-card",(function(e){W.addNewCard(e["popup-card-title-input"],e["popup-card-imgurl-input"]).then((function(e){t.prependItem(n(e))})).then((function(){return r.close()})).catch((function(e){return console.log("Error: ".concat(e))}))}));r.setEventListeners(),x.addEventListener("click",(function(){r.open()}))})).catch((function(e){return console.log("Error: ".concat(e))}))})).catch((function(e){return console.log("Error: ".concat(e))})),new r(A,J).enableValidation(),new r(A,H).enableValidation(),new r(A,N).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SXJILEVBQWNDLEVBQWdCcUYsR0FDMUNzRCxtQkFFTyxJQUFJNUksRUFBY0MsRUFBZ0JtRixHQUMxQ3dELG1CQUVPLElBQUk1SSxFQUFjQyxFQUFnQm9GLEdBQzFDdUQsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhCdXR0b24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXRhLFxyXG4gICAgdGVtcGxhdGUsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDbGljayxcclxuICAgIHVzZXJJZCxcclxuICAgIGhhbmRsZUxpa2VDbGlja1xyXG4gICkge1xyXG4gICAgdGhpcy5faW1hZ2UgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl90aXRsZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX3RlbXBsYXRlID0gdGVtcGxhdGU7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl9pbWFnZU93bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1nXCIpLnNyYyA9IHRoaXMuX2ltYWdlO1xyXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1nXCIpLmFsdCA9IHRoaXMuX3RpdGxlO1xyXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fY29udGFpbmVyLWhlYWRpbmdcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICB0aGlzLl90aXRsZTtcclxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLWxpa2VzXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgaWYgKHRoaXMuX2ltYWdlT3duZXJJZCA9PT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2RlbGV0ZVwiKS5zdHlsZS52aXNpYmlsaXR5ID1cclxuICAgICAgICBcInZpc2libGVcIjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5pc0xpa2VkKCkpIHtcclxuICAgICAgdGhpcy5lbGVtZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuaGVhcnQtYnV0dG9uXCIpXHJcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJoZWFydC1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgY2FyZExpa2UobmV3TGlrZXMpIHtcclxuICAgIHRoaXMuX2xpa2VzID0gbmV3TGlrZXM7XHJcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWFnZS1saWtlc1wiKS50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5oZWFydC1idXR0b25cIilcclxuICAgICAgLmNsYXNzTGlzdC5hZGQoXCJoZWFydC1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgY2FyZERpc2xpa2UoKSB7XHJcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWFnZS1saWtlc1wiKS50ZXh0Q29udGVudC0tO1xyXG4gICAgdGhpcy5lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmhlYXJ0LWJ1dHRvblwiKVxyXG4gICAgICAuY2xhc3NMaXN0LnJlbW92ZShcImhlYXJ0LWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLmVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuaGVhcnQtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUNsaWNrKCkpO1xyXG4gICAgdGhpcy5lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltZ1wiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUNhcmRDbGljaygpKTtcclxuICAgIHRoaXMuZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19kZWxldGVcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVDbGljaygpKTtcclxuICB9XHJcblxyXG4gIGlzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgoZWxlbWVudCkgPT4gZWxlbWVudC5faWQgPT09IHRoaXMuX3VzZXJJZCk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDYXJkID0gKCkgPT4geyBcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlKCk7IFxyXG5cclxuICAgIHRoaXMuZWxlbWVudCA9IG51bGw7IFxyXG5cclxuICB9OyBcclxufVxyXG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3NPYmplY3QsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9zZXR0aW5nc09iamVjdCA9IHNldHRpbmdzT2JqZWN0O1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICBjb25zdCB7IHN1Ym1pdEJ1dHRvblNlbGVjdG9yIH0gPSB0aGlzLl9zZXR0aW5nc09iamVjdDtcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHN1Ym1pdEJ1dHRvblNlbGVjdG9yLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IHsgaW5wdXRTZWxlY3Rvciwgc3VibWl0QnV0dG9uU2VsZWN0b3IgfSA9IHRoaXMuX3NldHRpbmdzT2JqZWN0O1xyXG5cclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihzdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9pc1ZhbGlkKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGNvbnN0IHsgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzIH0gPSB0aGlzLl9zZXR0aW5nc09iamVjdDtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChpbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcywgZXJyb3JDbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3NPYmplY3Q7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9pc1ZhbGlkKGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xyXG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpIHtcclxuICAgIGNvbnN0IHsgaW5hY3RpdmVCdXR0b25DbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3NPYmplY3Q7XHJcblxyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlblwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2ZW50KSA9PiB7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIFwibW91c2Vkb3duXCIsXHJcbiAgICAgIHRoaXMuX2Nsb3NlUG9wdXBXaXRoT3ZlcmxheVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9jbG9zZVBvcHVwV2l0aE92ZXJsYXkgPSAoZXZlbnQpID0+IHtcclxuICAgIGlmIChldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG5cclxub3BlbihsaW5rLCB0ZXh0KSB7XHJcbiAgICBjb25zdCBpbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1pbWFnZV9faW1hZ2VcIik7XHJcbiAgICBjb25zdCBjYXB0aW9uRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLWltYWdlX19uYW1lXCIpO1xyXG5cclxuICAgIGltYWdlRWxlbWVudC5zcmMgPSBsaW5rO1xyXG4gICAgY2FwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG5cclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEhhbmRsZXIpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKV07XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRGb3JtaW5wdXRzICgpIHtcclxuICAgIGNvbnN0IGlucHV0cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpXTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b25cIikudGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG4gICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8gX3ByZXZlbnREZWZhdWx0ID0gKGV2ZW50KSA9PntcclxuICAvLyAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAvLyB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uXCIpLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XHJcbiAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uXCIpLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIpXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhCdXR0b24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0SGFuZGxlcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9zdWJtaXRIYW5kbGVyID0gc3VibWl0SGFuZGxlcjtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5fc3VibWl0SGFuZGxlcigpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9uYW1lU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2JTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYXZhdGFyU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvICgpIHtcclxuICAgICAgY29uc3QgdXNlckluZm8gPSB7XHJcbiAgICAgICAgbmFtZTogdGhpcy5fbmFtZVNlbGVjdG9yLnRleHRDb250ZW50LFxyXG4gICAgICAgIGpvYjogdGhpcy5fam9iU2VsZWN0b3IudGV4dENvbnRlbnRcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdXNlckluZm9cclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5ld05hbWUsIG5ld0pvYiwgYXZhdGFyKXtcclxuICAgIHRoaXMuX25hbWVTZWxlY3Rvci50ZXh0Q29udGVudCA9IG5ld05hbWU7XHJcbiAgICB0aGlzLl9qb2JTZWxlY3Rvci50ZXh0Q29udGVudCA9IG5ld0pvYjtcclxuICAgIHRoaXMuX2F2YXRhclNlbGVjdG9yLnNyYyA9IGF2YXRhcjtcclxuICB9XHJcblxyXG4gIHNldEF2YXRhckltYWdlKGF2YXRhclVybCl7XHJcbiAgICB0aGlzLl9hdmF0YXJTZWxlY3Rvci5zcmMgPSBhdmF0YXJVcmw7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMgKCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtIChlbGVtZW50KXtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG4gIHByZXBlbmRJdGVtIChlbGVtZW50KXtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxyXG4gICAgfSxcclxuICBdO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNldHRpbmdzT2JqZWN0ID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICAgIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcclxuICB9O1xyXG4gIFxyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLW92ZXJsYXlcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSW5mb0VkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2luZm8tZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1wcm9maWxlX19mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyRWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLWF2YXRhcmVkaXRfX2Zvcm1cIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwb3B1cC1wcm9maWxlX19mb3JtLWlucHV0X25hbWVcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUlucHV0Sm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwb3B1cC1wcm9maWxlX19mb3JtLWlucHV0X2pvYlwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBuZXdQbGFjZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLWNhcmRfX2Zvcm1cIik7XHJcbiIsImNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdGhpcy5iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgdGhpcy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2dldFJlc3BvbnNlRGF0YShyZXMpIHtcclxuICAgIGlmICghcmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh1c2VyTmFtZSwgdXNlckFib3V0KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IHVzZXJOYW1lLFxyXG4gICAgICAgIGFib3V0OiB1c2VyQWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgfVxyXG5cclxuICBzZXRBdmF0YXJJbWFnZShpbWFnZVVybCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBgJHtpbWFnZVVybH1gLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgYWRkTmV3Q2FyZChpbWFnZU5hbWUsIGltYWdlTGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGltYWdlTmFtZSxcclxuICAgICAgICBsaW5rOiBpbWFnZUxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgYWRkTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUxpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgfVxyXG5cclxuICAvLyBvdGhlciBtZXRob2RzIGZvciB3b3JraW5nIHdpdGggdGhlIEFQSVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCI5ZDY5OTE5YS1jNWU2LTQ5OWEtOGRlNS1kNTc4NTcxZTllNzdcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG4iLCIvLyBDU1MgSW1wb3J0c1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG4vLyBKYXZhU2NyaXB0IEltcG9ydHNcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhCdXR0b24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhCdXR0b24uanNcIjtcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIHByb2ZpbGVBZGRCdXR0b24sXHJcbiAgcHJvZmlsZUluZm9FZGl0QnRuLFxyXG4gIHByb2ZpbGVGb3JtLFxyXG4gIG5ld1BsYWNlRm9ybSxcclxuICBzZXR0aW5nc09iamVjdCxcclxuICBhdmF0YXJFZGl0Rm9ybSxcclxuICBwcm9maWxlQXZhdGFyRWRpdEJ1dHRvbixcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuLi9jb21wb25lbnRzL0FwaVwiO1xyXG5cclxuY29uc3QgZWRpdEF2YXRhck1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXAtYXZhdGFyZWRpdFwiLCAoZGF0YSkgPT4ge1xyXG4gIGFwaVxyXG4gICAgLnNldEF2YXRhckltYWdlKGRhdGFbXCJwb3B1cC1hdmF0YXJlZGl0LXByb2ZpbGUtbGluay1pbnB1dFwiXSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgdXNlckluZm9Nb2RhbC5zZXRBdmF0YXJJbWFnZShkYXRhW1wicG9wdXAtYXZhdGFyZWRpdC1wcm9maWxlLWxpbmstaW5wdXRcIl0pO1xyXG4gICAgfSlcclxuICAgIC50aGVuKCgpID0+IGVkaXRBdmF0YXJNb2RhbC5jbG9zZSgpKVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpO1xyXG59KTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvTW9kYWwgPSBuZXcgVXNlckluZm8oXHJcbiAgXCIucHJvZmlsZV9faW5mby1oZWFkaW5nXCIsXHJcbiAgXCIucHJvZmlsZV9faW5mby1kZXNjcmlwdGlvblwiLFxyXG4gIFwiLnByb2ZpbGVfX2F2YXRhclwiXHJcbik7XHJcblxyXG5jb25zdCBpbWFnZU1vZGFsID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwLWltYWdlXCIpO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpZWxNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwLXByb2ZpbGVcIiwgKGRhdGEpID0+IHtcclxuICBhcGlcclxuICAgIC5zZXRVc2VySW5mbyhcclxuICAgICAgZGF0YVtcInBvcHVwLXByb2ZpbGUtcHJvZmlsZS1uYW1lLWlucHV0XCJdLFxyXG4gICAgICBkYXRhW1wicG9wdXAtcHJvZmlsZS1qb2ItaW5wdXRcIl1cclxuICAgIClcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgdXNlckluZm9Nb2RhbC5zZXRVc2VySW5mbyhyZXMubmFtZSwgcmVzLmFib3V0LCByZXMuYXZhdGFyKTtcclxuICAgIH0pXHJcbiAgICAudGhlbigoKSA9PiBlZGl0UHJvZmllbE1vZGFsLmNsb3NlKCkpXHJcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKSk7XHJcbn0pO1xyXG5cclxuLy8gZXZlbnRsaXN0ZW5lcnMgdG8gdGhlIG1vZGFsXHJcbmltYWdlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIGRlbGV0ZUJ1dHRvbk1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5lZGl0QXZhdGFyTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmVkaXRQcm9maWVsTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbnByb2ZpbGVJbmZvRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHVzZXJpbmZvID0gdXNlckluZm9Nb2RhbC5nZXRVc2VySW5mbygpO1xyXG4gIGFwaVxyXG4gICAgLmdldFVzZXJJbmZvKClcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1wcm9maWxlX19mb3JtLWlucHV0X25hbWVcIikudmFsdWUgPVxyXG4gICAgICAgIHVzZXJpbmZvLm5hbWU7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtcHJvZmlsZV9fZm9ybS1pbnB1dF9qb2JcIikudmFsdWUgPVxyXG4gICAgICAgIHVzZXJpbmZvLmpvYjtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKSk7XHJcbiAgZWRpdFByb2ZpZWxNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUF2YXRhckVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBlZGl0QXZhdGFyTW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbi8vIGluaXRhbCB0aGUgcHJvZmlsZSBuYW1lIGFuZCBqb2IgZnJvbSBzZXJ2ZXJcclxuYXBpXHJcbiAgLmdldFVzZXJJbmZvKClcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICB1c2VySW5mb01vZGFsLnNldFVzZXJJbmZvKHJlcy5uYW1lLCByZXMuYWJvdXQsIHJlcy5hdmF0YXIpO1xyXG5cclxuICAgIGNvbnN0IGNhcmRHZW5lcmF0b3IgPSAoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkSW5zdGFuY2UgPSBuZXcgQ2FyZChcclxuICAgICAgICBpdGVtLFxyXG4gICAgICAgIFwiI2VsZW1lbnQtdGVtcGxhdGVcIixcclxuICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICBpbWFnZU1vZGFsLm9wZW4oaXRlbS5saW5rLCBpdGVtLm5hbWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uTW9kYWwgPSBuZXcgUG9wdXBXaXRoQnV0dG9uKFwiLnBvcHVwLWRlbGV0ZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgIC5yZW1vdmVDYXJkKGl0ZW0uX2lkKVxyXG4gICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNhcmRJbnN0YW5jZS5yZW1vdmVDYXJkKCk7XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAudGhlbigoKSA9PiBkZWxldGVCdXR0b25Nb2RhbC5jbG9zZSgpKVxyXG4gICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgZGVsZXRlQnV0dG9uTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgIGRlbGV0ZUJ1dHRvbk1vZGFsLm9wZW4oKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlcy5faWQsXHJcbiAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgaXNBbGVyYWR5TGlrZWQgPSBjYXJkSW5zdGFuY2UuaXNMaWtlZCgpO1xyXG5cclxuICAgICAgICAgIGlmIChpc0FsZXJhZHlMaWtlZCkge1xyXG4gICAgICAgICAgICBhcGlcclxuICAgICAgICAgICAgICAucmVtb3ZlTGlrZShpdGVtLl9pZClcclxuICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYXJkSW5zdGFuY2UuY2FyZERpc2xpa2UocmVzLmxpa2VzKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgIC5hZGRMaWtlKGl0ZW0uX2lkKVxyXG4gICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIGNhcmRJbnN0YW5jZS5jYXJkTGlrZShyZXMubGlrZXMpO1xyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZEluc3RhbmNlLmdlbmVyYXRlQ2FyZCgpO1xyXG4gICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGluaXRpYWwgY2FyZHMgZnJvbSB0aGUgc2VydmVyXHJcbiAgICBhcGlcclxuICAgICAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjb25zdCBpbml0aWFsQ2FyZHNNb2RhbCA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpdGVtczogcmVzLFxyXG4gICAgICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICBpbml0aWFsQ2FyZHNNb2RhbC5hZGRJdGVtKGNhcmRHZW5lcmF0b3IoaXRlbSkpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIFwiLmVsZW1lbnRzXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGluaXRpYWxDYXJkc01vZGFsLnJlbmRlckl0ZW1zKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZENhcmRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwLWNhcmRcIiwgKG9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgIC5hZGROZXdDYXJkKFxyXG4gICAgICAgICAgICAgIG9iamVjdFtcInBvcHVwLWNhcmQtdGl0bGUtaW5wdXRcIl0sXHJcbiAgICAgICAgICAgICAgb2JqZWN0W1wicG9wdXAtY2FyZC1pbWd1cmwtaW5wdXRcIl1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgaW5pdGlhbENhcmRzTW9kYWwucHJlcGVuZEl0ZW0oY2FyZEdlbmVyYXRvcihyZXMpKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gYWRkQ2FyZE1vZGFsLmNsb3NlKCkpXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBhZGRDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgICAgcHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgYWRkQ2FyZE1vZGFsLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpO1xyXG5cclxuLy8gZW5hYmxlIGZvcm0gdmFsaWRhdG9yc1xyXG5jb25zdCBuZXdQbGFjZUZvcm1JbnN0YW5jZSA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzT2JqZWN0LCBuZXdQbGFjZUZvcm0pO1xyXG5uZXdQbGFjZUZvcm1JbnN0YW5jZS5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBwcm9maWxlRm9ybUluc3RhbmNlID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3NPYmplY3QsIHByb2ZpbGVGb3JtKTtcclxucHJvZmlsZUZvcm1JbnN0YW5jZS5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhdmF0YXJFZGl0SW5zdGFuY2UgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5nc09iamVjdCwgYXZhdGFyRWRpdEZvcm0pO1xyXG5hdmF0YXJFZGl0SW5zdGFuY2UuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImRhdGEiLCJ0ZW1wbGF0ZSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwidXNlcklkIiwiaGFuZGxlTGlrZUNsaWNrIiwiZWxlbWVudCIsInJlbW92ZSIsInRoaXMiLCJfaW1hZ2UiLCJsaW5rIiwiX3RpdGxlIiwibmFtZSIsIl9saWtlcyIsImxpa2VzIiwiX3RlbXBsYXRlIiwiX3VzZXJJZCIsIl9pbWFnZU93bmVySWQiLCJvd25lciIsIl9pZCIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9nZXRUZW1wbGF0ZSIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwibGVuZ3RoIiwic3R5bGUiLCJ2aXNpYmlsaXR5IiwiaXNMaWtlZCIsImNsYXNzTGlzdCIsImFkZCIsIl9zZXRFdmVudExpc3RlbmVycyIsIm5ld0xpa2VzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNvbWUiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3NPYmplY3QiLCJmb3JtRWxlbWVudCIsIl9zZXR0aW5nc09iamVjdCIsIl9mb3JtRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJpbnB1dFNlbGVjdG9yIiwiaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImJ1dHRvbkVsZW1lbnQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2lzVmFsaWQiLCJlcnJvck1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJlcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2hhc0ludmFsaWRJbnB1dCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImV2ZW50Iiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfY2xvc2VQb3B1cFdpdGhPdmVybGF5IiwiUG9wdXBXaXRoSW1hZ2UiLCJ0ZXh0IiwiaW1hZ2VFbGVtZW50IiwiY2FwdGlvbkVsZW1lbnQiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0SGFuZGxlciIsIl9mb3JtIiwiX3N1Ym1pdEhhbmRsZXIiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dHMiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsIlBvcHVwV2l0aEJ1dHRvbiIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lU2VsZWN0b3IiLCJfam9iU2VsZWN0b3IiLCJfYXZhdGFyU2VsZWN0b3IiLCJqb2IiLCJuZXdOYW1lIiwibmV3Sm9iIiwiYXZhdGFyIiwiYXZhdGFyVXJsIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJhcHBlbmQiLCJwcmVwZW5kIiwiZm9ybVNlbGVjdG9yIiwicHJvZmlsZUFkZEJ1dHRvbiIsInByb2ZpbGVBdmF0YXJFZGl0QnV0dG9uIiwicHJvZmlsZUluZm9FZGl0QnRuIiwicHJvZmlsZUZvcm0iLCJhdmF0YXJFZGl0Rm9ybSIsIm5ld1BsYWNlRm9ybSIsImFwaSIsIkFwaSIsIm9wdGlvbnMiLCJiYXNlVXJsIiwiaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsInRoZW4iLCJfZ2V0UmVzcG9uc2VEYXRhIiwidXNlck5hbWUiLCJ1c2VyQWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiaW1hZ2VVcmwiLCJpbWFnZU5hbWUiLCJpbWFnZUxpbmsiLCJjYXJkSWQiLCJhdXRob3JpemF0aW9uIiwiZWRpdEF2YXRhck1vZGFsIiwidXNlckluZm9Nb2RhbCIsInNldEF2YXRhckltYWdlIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiaW1hZ2VNb2RhbCIsImVkaXRQcm9maWVsTW9kYWwiLCJzZXRVc2VySW5mbyIsInNldEV2ZW50TGlzdGVuZXJzIiwidXNlcmluZm8iLCJnZXRVc2VySW5mbyIsIm9wZW4iLCJjYXJkR2VuZXJhdG9yIiwiY2FyZEluc3RhbmNlIiwiZGVsZXRlQnV0dG9uTW9kYWwiLCJyZW1vdmVDYXJkIiwiY2FyZERpc2xpa2UiLCJjYXJkTGlrZSIsImdlbmVyYXRlQ2FyZCIsImluaXRpYWxDYXJkc01vZGFsIiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwiYWRkQ2FyZE1vZGFsIiwib2JqZWN0IiwicHJlcGVuZEl0ZW0iLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==