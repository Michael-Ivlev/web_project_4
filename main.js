!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o,i,u){var a,c,s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c=function(){s.element.remove(),s.element=null},(a="removeCard")in this?Object.defineProperty(this,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):this[a]=c,this._image=e.link,this._title=e.name,this._likes=e.likes,this._template=n,this._userId=i,this._imageOwnerId=e.owner._id,this._handleCardClick=r,this._handleDeleteClick=o,this._handleLikeClick=u}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._template).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this.element=this._getTemplate(),this.element.querySelector(".element__img").src=this._image,this.element.querySelector(".element__img").alt=this._title,this.element.querySelector(".element__container-heading").textContent=this._title,this.element.querySelector(".image-likes").textContent=this._likes.length,this._imageOwnerId===this._userId&&(this.element.querySelector(".element__delete").style.visibility="visible"),this.isLiked()&&this.element.querySelector(".heart-button").classList.add("heart-button_active"),this._setEventListeners(),this.element}},{key:"cardLike",value:function(e){this._likes=e,this.element.querySelector(".image-likes").textContent=this._likes.length,this.element.querySelector(".heart-button").classList.add("heart-button_active")}},{key:"cardDislike",value:function(e){console.log(e),this.element.querySelector(".image-likes").textContent=e.length,this.element.querySelector(".heart-button").classList.remove("heart-button_active")}},{key:"_setEventListeners",value:function(){var e=this;this.element.querySelector(".heart-button").addEventListener("click",(function(){return e._handleLikeClick()})),this.element.querySelector(".element__img").addEventListener("click",(function(){return e._handleCardClick()})),this.element.querySelector(".element__delete").addEventListener("click",(function(){return e._handleDeleteClick()}))}},{key:"isLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._settingsObject=t,this._formElement=n}var t,r;return t=e,(r=[{key:"enableValidation",value:function(){var e=this._settingsObject.submitButtonSelector;this._formElement.addEventListener(e,(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"_setEventListeners",value:function(){var e=this,t=this._settingsObject,n=t.inputSelector,r=t.submitButtonSelector,o=Array.from(this._formElement.querySelectorAll(n)),i=this._formElement.querySelector(r);this._toggleButtonState(o,i),o.forEach((function(t){t.addEventListener("input",(function(){e._isValid(t),e._toggleButtonState(o,i)}))}))}},{key:"_showInputError",value:function(e){var t=e.validationMessage,n=this._settingsObject,r=n.inputErrorClass,o=n.errorClass,i=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(r),i.textContent=t,i.classList.add(o)}},{key:"_hideInputError",value:function(e){var t=this._settingsObject,n=t.inputErrorClass,r=t.errorClass,o=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(n),o.classList.remove(r),o.textContent=""}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){var n=this._settingsObject.inactiveButtonClass;this._hasInvalidInput(e)?(t.classList.add(n),t.setAttribute("disabled",!0)):(t.classList.remove(n),t.removeAttribute("disabled",!0))}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),i(this,"_closePopupWithOverlay",(function(e){e.target===e.currentTarget&&n.close()})),this._popupElement=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_open"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.querySelector(".popup__close").addEventListener("click",(function(){return e.close()})),this._popupElement.addEventListener("mousedown",this._closePopupWithOverlay)}}])&&o(t.prototype,n),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},l(e,t,n||e)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function u(){return c(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"open",value:function(e,t){var n=this._popupElement.querySelector(".popup-image__image"),r=this._popupElement.querySelector(".popup-image__name");n.src=e,r.textContent=t,l(h(u.prototype),"open",this).call(this)}}])&&s(t.prototype,n),u}(u);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function g(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},k(e,t,n||e)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function u(e,t){var n,r,o,a,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),c=function(){k((n=S(r),E(u.prototype)),"setEventListeners",n).call(n),r._form.addEventListener("submit",(function(e){r._form.querySelector(".popup__button").textContent="Saving...",r._submitHandler(r._getInputValues()),e.preventDefault()}))},(a="setEventListeners")in(o=S(r=i.call(this,e)))?Object.defineProperty(o,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[a]=c,r._submitHandler=t,r._form=r._popupElement.querySelector(".popup__form"),r}return t=u,(n=[{key:"_getInputValues",value:function(){var e=m(this._form.querySelectorAll(".popup__input")),t={};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"setForminputs",value:function(){m(this._form.querySelectorAll(".popup__input"))}},{key:"close",value:function(){k(E(u.prototype),"close",this).call(this),this._form.reset(),this._form.querySelector(".popup__button").textContent="Save",this._form.querySelector(".popup__button").setAttribute("disabled",!0),this._form.querySelector(".popup__button").classList.add("popup__button_disabled")}}])&&_(t.prototype,n),u}(u);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function j(e,t){return j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},j(e,t)}function C(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t,n){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},q(e,t,n||e)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=I(t);if(n){var o=I(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return C(this,e)});function o(e,t){var n,i,u,a,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),c=function(){q((n=L(i),I(o.prototype)),"setEventListeners",n).call(n),i._form.addEventListener("submit",(function(e){e.preventDefault(),i._submitHandler()}))},(a="setEventListeners")in(u=L(i=r.call(this,e)))?Object.defineProperty(u,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[a]=c,i._submitHandler=t,i._form=i._popupElement.querySelector(".popup__form"),i}return o}(u);function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameSelector=document.querySelector(t),this._jobSelector=document.querySelector(n),this._avatarSelector=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._nameSelector.textContent,job:this._jobSelector.textContent}}},{key:"setUserInfo",value:function(e,t,n){this._nameSelector.textContent=e,this._jobSelector.textContent=t,this._avatarSelector.src=n}},{key:"setAvatarImage",value:function(e){this._avatarSelector.src=e}}])&&R(t.prototype,n),e}();function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.append(e)}},{key:"prependItem",value:function(e){this._container.prepend(e)}}])&&D(t.prototype,n),e}(),A={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},x=document.querySelector(".profile__add-button"),B=document.querySelector(".profile__avatar-overlay"),V=document.querySelector(".profile__info-edit"),H=document.querySelector("#popup-profile__form"),N=document.querySelector("#popup-avataredit__form"),J=(document.querySelector("#popup-profile__form-input_name"),document.querySelector("#popup-profile__form-input_job"),document.querySelector("#popup-card__form"));function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var W=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}var t,n;return t=e,(n=[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"setUserInfo",value:function(e,t){var n=this;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return n._getResponseData(e)}))}},{key:"setAvatarImage",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:"".concat(e)})}).then((function(e){return t._getResponseData(e)}))}},{key:"addNewCard",value:function(e,t){var n=this;return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return n._getResponseData(e)}))}},{key:"removeCard",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return t._getResponseData(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers}).then((function(e){return t._getResponseData(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return t._getResponseData(e)}))}}])&&M(t.prototype,n),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"9d69919a-c5e6-499a-8de5-d578571e9e77","Content-Type":"application/json"}}),z=new w(".popup-avataredit",(function(e){W.setAvatarImage(e["popup-avataredit-profile-link-input"]).then((function(){F.setAvatarImage(e["popup-avataredit-profile-link-input"])})).then((function(){return z.close()})).catch((function(e){return console.log("Error: ".concat(e))}))})),F=new T(".profile__info-heading",".profile__info-description",".profile__avatar"),$=new d(".popup-image"),G=new w(".popup-profile",(function(e){W.setUserInfo(e["popup-profile-profile-name-input"],e["popup-profile-job-input"]).then((function(e){F.setUserInfo(e.name,e.about,e.avatar)})).then((function(){return G.close()})).catch((function(e){return console.log("Error: ".concat(e))}))}));$.setEventListeners(),z.setEventListeners(),G.setEventListeners(),V.addEventListener("click",(function(){var e=F.getUserInfo();document.querySelector("#popup-profile__form-input_name").value=e.name,document.querySelector("#popup-profile__form-input_job").value=e.job,G.open()})),B.addEventListener("click",(function(){z.open()})),W.getUserInfo().then((function(e){F.setUserInfo(e.name,e.about,e.avatar);var n=function(n){var r=new t(n,"#element-template",(function(){$.open(n.link,n.name)}),(function(){var e=new P(".popup-delete",(function(){W.removeCard(n._id).then((function(){r.removeCard()})).then((function(){return e.close()})).catch((function(e){return console.log("Error: ".concat(e))}))}));e.setEventListeners(),e.open()}),e._id,(function(){r.isLiked()?W.removeLike(n._id).then((function(e){r.cardDislike(e.likes)})).catch((function(e){return console.log("Error: ".concat(e))})):W.addLike(n._id).then((function(e){r.cardLike(e.likes)})).catch((function(e){return console.log("Error: ".concat(e))}))}));return r.generateCard()};W.getInitialCards().then((function(e){var t=new U({items:e,renderer:function(e){t.addItem(n(e))}},".elements");t.renderItems();var r=new w(".popup-card",(function(e){W.addNewCard(e["popup-card-title-input"],e["popup-card-imgurl-input"]).then((function(e){t.prependItem(n(e))})).then((function(){return r.close()})).catch((function(e){return console.log("Error: ".concat(e))}))}));r.setEventListeners(),x.addEventListener("click",(function(){r.open()}))})).catch((function(e){return console.log("Error: ".concat(e))}))})).catch((function(e){return console.log("Error: ".concat(e))})),new r(A,J).enableValidation(),new r(A,H).enableValidation(),new r(A,N).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q29ELG1CQUVPLElBQUkxSSxFQUFjQyxFQUFnQm1GLEdBQzFDc0QsbUJBRU8sSUFBSTFJLEVBQWNDLEVBQWdCb0YsR0FDMUNxRCxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEJ1dHRvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGRhdGEsXHJcbiAgICB0ZW1wbGF0ZSxcclxuICAgIGhhbmRsZUNhcmRDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxyXG4gICAgdXNlcklkLFxyXG4gICAgaGFuZGxlTGlrZUNsaWNrXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9pbWFnZSA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX3RpdGxlID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fdGVtcGxhdGUgPSB0ZW1wbGF0ZTtcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgIHRoaXMuX2ltYWdlT3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGUpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWdcIikuc3JjID0gdGhpcy5faW1hZ2U7XHJcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWdcIikuYWx0ID0gdGhpcy5fdGl0bGU7XHJcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19jb250YWluZXItaGVhZGluZ1wiKS50ZXh0Q29udGVudCA9XHJcbiAgICAgIHRoaXMuX3RpdGxlO1xyXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW1hZ2UtbGlrZXNcIikudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICBpZiAodGhpcy5faW1hZ2VPd25lcklkID09PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fZGVsZXRlXCIpLnN0eWxlLnZpc2liaWxpdHkgPVxyXG4gICAgICAgIFwidmlzaWJsZVwiO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xyXG4gICAgICB0aGlzLmVsZW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5oZWFydC1idXR0b25cIilcclxuICAgICAgICAuY2xhc3NMaXN0LmFkZChcImhlYXJ0LWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBjYXJkTGlrZShuZXdMaWtlcykge1xyXG4gICAgdGhpcy5fbGlrZXMgPSBuZXdMaWtlcztcclxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLWxpa2VzXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgdGhpcy5lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmhlYXJ0LWJ1dHRvblwiKVxyXG4gICAgICAuY2xhc3NMaXN0LmFkZChcImhlYXJ0LWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBjYXJkRGlzbGlrZShsaWtlc2Fib3V0KSB7XHJcbiAgICBjb25zb2xlLmxvZyhsaWtlc2Fib3V0KVxyXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW1hZ2UtbGlrZXNcIikudGV4dENvbnRlbnQgPSBsaWtlc2Fib3V0Lmxlbmd0aDtcclxuICAgIHRoaXMuZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5oZWFydC1idXR0b25cIilcclxuICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoXCJoZWFydC1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmhlYXJ0LWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VDbGljaygpKTtcclxuICAgIHRoaXMuZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWdcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soKSk7XHJcbiAgICB0aGlzLmVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fZGVsZXRlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2soKSk7XHJcbiAgfVxyXG5cclxuICBpc0xpa2VkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUoKGVsZW1lbnQpID0+IGVsZW1lbnQuX2lkID09PSB0aGlzLl91c2VySWQpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZCA9ICgpID0+IHsgXHJcblxyXG4gICAgdGhpcy5lbGVtZW50LnJlbW92ZSgpOyBcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQgPSBudWxsOyBcclxuXHJcbiAgfTsgXHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzT2JqZWN0LCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fc2V0dGluZ3NPYmplY3QgPSBzZXR0aW5nc09iamVjdDtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgY29uc3QgeyBzdWJtaXRCdXR0b25TZWxlY3RvciB9ID0gdGhpcy5fc2V0dGluZ3NPYmplY3Q7XHJcblxyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihzdWJtaXRCdXR0b25TZWxlY3RvciwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCB7IGlucHV0U2VsZWN0b3IsIHN1Ym1pdEJ1dHRvblNlbGVjdG9yIH0gPSB0aGlzLl9zZXR0aW5nc09iamVjdDtcclxuXHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faXNWYWxpZChpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcywgZXJyb3JDbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3NPYmplY3Q7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKGVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MgfSA9IHRoaXMuX3NldHRpbmdzT2JqZWN0O1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShlcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfaXNWYWxpZChpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSB7XHJcbiAgICBjb25zdCB7IGluYWN0aXZlQnV0dG9uQ2xhc3MgfSA9IHRoaXMuX3NldHRpbmdzT2JqZWN0O1xyXG5cclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5cIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlblwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldmVudCkgPT4ge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBcIm1vdXNlZG93blwiLFxyXG4gICAgICB0aGlzLl9jbG9zZVBvcHVwV2l0aE92ZXJsYXlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBfY2xvc2VQb3B1cFdpdGhPdmVybGF5ID0gKGV2ZW50KSA9PiB7XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBldmVudC5jdXJyZW50VGFyZ2V0KSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuXHJcbm9wZW4obGluaywgdGV4dCkge1xyXG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtaW1hZ2VfX2ltYWdlXCIpO1xyXG4gICAgY29uc3QgY2FwdGlvbkVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1pbWFnZV9fbmFtZVwiKTtcclxuXHJcbiAgICBpbWFnZUVsZW1lbnQuc3JjID0gbGluaztcclxuICAgIGNhcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gdGV4dDtcclxuXHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBzdWJtaXRIYW5kbGVyKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIgPSBzdWJtaXRIYW5kbGVyO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIildO1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0Rm9ybWlucHV0cyAoKSB7XHJcbiAgICBjb25zdCBpbnB1dHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKV07XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uXCIpLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgICAgdGhpcy5fc3VibWl0SGFuZGxlcih0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vIF9wcmV2ZW50RGVmYXVsdCA9IChldmVudCkgPT57XHJcbiAgLy8gICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgLy8gfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKS50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b25cIikuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKS5jbGFzc0xpc3QuYWRkKFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiKVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoQnV0dG9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEhhbmRsZXIpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIoKTtcclxuICAgIH0pO1xyXG4gIH07XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3RvcihuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbmFtZVNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fam9iU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhclNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbyAoKSB7XHJcbiAgICAgIGNvbnN0IHVzZXJJbmZvID0ge1xyXG4gICAgICAgIG5hbWU6IHRoaXMuX25hbWVTZWxlY3Rvci50ZXh0Q29udGVudCxcclxuICAgICAgICBqb2I6IHRoaXMuX2pvYlNlbGVjdG9yLnRleHRDb250ZW50XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHVzZXJJbmZvXHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhuZXdOYW1lLCBuZXdKb2IsIGF2YXRhcil7XHJcbiAgICB0aGlzLl9uYW1lU2VsZWN0b3IudGV4dENvbnRlbnQgPSBuZXdOYW1lO1xyXG4gICAgdGhpcy5fam9iU2VsZWN0b3IudGV4dENvbnRlbnQgPSBuZXdKb2I7XHJcbiAgICB0aGlzLl9hdmF0YXJTZWxlY3Rvci5zcmMgPSBhdmF0YXI7XHJcbiAgfVxyXG5cclxuICBzZXRBdmF0YXJJbWFnZShhdmF0YXJVcmwpe1xyXG4gICAgdGhpcy5fYXZhdGFyU2VsZWN0b3Iuc3JjID0gYXZhdGFyVXJsO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zICgpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbSAoZWxlbWVudCl7XHJcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuICBwcmVwZW5kSXRlbSAoZWxlbWVudCl7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuICAgIH0sXHJcbiAgXTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZXR0aW5nc09iamVjdCA9IHtcclxuICAgIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXHJcbiAgfTtcclxuICBcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhckVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1vdmVybGF5XCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUluZm9FZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbmZvLWVkaXRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtcHJvZmlsZV9fZm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IGF2YXRhckVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1hdmF0YXJlZGl0X19mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcG9wdXAtcHJvZmlsZV9fZm9ybS1pbnB1dF9uYW1lXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbnB1dEpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcG9wdXAtcHJvZmlsZV9fZm9ybS1pbnB1dF9qb2JcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgbmV3UGxhY2VGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1jYXJkX19mb3JtXCIpO1xyXG4iLCJjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgIHRoaXMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9nZXRSZXNwb25zZURhdGEocmVzKSB7XHJcbiAgICBpZiAoIXJlcy5vaykge1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8odXNlck5hbWUsIHVzZXJBYm91dCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiB1c2VyTmFtZSxcclxuICAgICAgICBhYm91dDogdXNlckFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgc2V0QXZhdGFySW1hZ2UoaW1hZ2VVcmwpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogYCR7aW1hZ2VVcmx9YCxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICB9XHJcblxyXG4gIGFkZE5ld0NhcmQoaW1hZ2VOYW1lLCBpbWFnZUxpbmspIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBpbWFnZU5hbWUsXHJcbiAgICAgICAgbGluazogaW1hZ2VMaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICB9XHJcblxyXG4gIGFkZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgLy8gb3RoZXIgbWV0aG9kcyBmb3Igd29ya2luZyB3aXRoIHRoZSBBUElcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiOWQ2OTkxOWEtYzVlNi00OTlhLThkZTUtZDU3ODU3MWU5ZTc3XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuIiwiLy8gQ1NTIEltcG9ydHNcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuLy8gSmF2YVNjcmlwdCBJbXBvcnRzXHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoQnV0dG9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQnV0dG9uLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHtcclxuICBwcm9maWxlQWRkQnV0dG9uLFxyXG4gIHByb2ZpbGVJbmZvRWRpdEJ0bixcclxuICBwcm9maWxlRm9ybSxcclxuICBuZXdQbGFjZUZvcm0sXHJcbiAgc2V0dGluZ3NPYmplY3QsXHJcbiAgYXZhdGFyRWRpdEZvcm0sXHJcbiAgcHJvZmlsZUF2YXRhckVkaXRCdXR0b24sXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgeyBhcGkgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGlcIjtcclxuXHJcbmNvbnN0IGVkaXRBdmF0YXJNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwLWF2YXRhcmVkaXRcIiwgKGRhdGEpID0+IHtcclxuICBhcGlcclxuICAgIC5zZXRBdmF0YXJJbWFnZShkYXRhW1wicG9wdXAtYXZhdGFyZWRpdC1wcm9maWxlLWxpbmstaW5wdXRcIl0pXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvTW9kYWwuc2V0QXZhdGFySW1hZ2UoZGF0YVtcInBvcHVwLWF2YXRhcmVkaXQtcHJvZmlsZS1saW5rLWlucHV0XCJdKTtcclxuICAgIH0pXHJcbiAgICAudGhlbigoKSA9PiBlZGl0QXZhdGFyTW9kYWwuY2xvc2UoKSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKTtcclxufSk7XHJcblxyXG5jb25zdCB1c2VySW5mb01vZGFsID0gbmV3IFVzZXJJbmZvKFxyXG4gIFwiLnByb2ZpbGVfX2luZm8taGVhZGluZ1wiLFxyXG4gIFwiLnByb2ZpbGVfX2luZm8tZGVzY3JpcHRpb25cIixcclxuICBcIi5wcm9maWxlX19hdmF0YXJcIlxyXG4pO1xyXG5cclxuY29uc3QgaW1hZ2VNb2RhbCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cC1pbWFnZVwiKTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWVsTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cC1wcm9maWxlXCIsIChkYXRhKSA9PiB7XHJcbiAgYXBpXHJcbiAgICAuc2V0VXNlckluZm8oXHJcbiAgICAgIGRhdGFbXCJwb3B1cC1wcm9maWxlLXByb2ZpbGUtbmFtZS1pbnB1dFwiXSxcclxuICAgICAgZGF0YVtcInBvcHVwLXByb2ZpbGUtam9iLWlucHV0XCJdXHJcbiAgICApXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvTW9kYWwuc2V0VXNlckluZm8ocmVzLm5hbWUsIHJlcy5hYm91dCwgcmVzLmF2YXRhcik7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKCkgPT4gZWRpdFByb2ZpZWxNb2RhbC5jbG9zZSgpKVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpO1xyXG59KTtcclxuXHJcbi8vIGV2ZW50bGlzdGVuZXJzIHRvIHRoZSBtb2RhbFxyXG5pbWFnZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBkZWxldGVCdXR0b25Nb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZWRpdEF2YXRhck1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5lZGl0UHJvZmllbE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5wcm9maWxlSW5mb0VkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCB1c2VyaW5mbyA9IHVzZXJJbmZvTW9kYWwuZ2V0VXNlckluZm8oKTtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLXByb2ZpbGVfX2Zvcm0taW5wdXRfbmFtZVwiKS52YWx1ZSA9XHJcbiAgICB1c2VyaW5mby5uYW1lO1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtcHJvZmlsZV9fZm9ybS1pbnB1dF9qb2JcIikudmFsdWUgPSB1c2VyaW5mby5qb2I7XHJcbiAgZWRpdFByb2ZpZWxNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUF2YXRhckVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBlZGl0QXZhdGFyTW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbi8vIGluaXRhbCB0aGUgcHJvZmlsZSBuYW1lIGFuZCBqb2IgZnJvbSBzZXJ2ZXJcclxuYXBpXHJcbiAgLmdldFVzZXJJbmZvKClcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICB1c2VySW5mb01vZGFsLnNldFVzZXJJbmZvKHJlcy5uYW1lLCByZXMuYWJvdXQsIHJlcy5hdmF0YXIpO1xyXG5cclxuICAgIGNvbnN0IGNhcmRHZW5lcmF0b3IgPSAoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkSW5zdGFuY2UgPSBuZXcgQ2FyZChcclxuICAgICAgICBpdGVtLFxyXG4gICAgICAgIFwiI2VsZW1lbnQtdGVtcGxhdGVcIixcclxuICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICBpbWFnZU1vZGFsLm9wZW4oaXRlbS5saW5rLCBpdGVtLm5hbWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uTW9kYWwgPSBuZXcgUG9wdXBXaXRoQnV0dG9uKFwiLnBvcHVwLWRlbGV0ZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgIC5yZW1vdmVDYXJkKGl0ZW0uX2lkKVxyXG4gICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNhcmRJbnN0YW5jZS5yZW1vdmVDYXJkKCk7XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAudGhlbigoKSA9PiBkZWxldGVCdXR0b25Nb2RhbC5jbG9zZSgpKVxyXG4gICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgZGVsZXRlQnV0dG9uTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgIGRlbGV0ZUJ1dHRvbk1vZGFsLm9wZW4oKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlcy5faWQsXHJcbiAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgaXNBbGVyYWR5TGlrZWQgPSBjYXJkSW5zdGFuY2UuaXNMaWtlZCgpO1xyXG5cclxuICAgICAgICAgIGlmIChpc0FsZXJhZHlMaWtlZCkge1xyXG4gICAgICAgICAgICBhcGlcclxuICAgICAgICAgICAgICAucmVtb3ZlTGlrZShpdGVtLl9pZClcclxuICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYXJkSW5zdGFuY2UuY2FyZERpc2xpa2UocmVzLmxpa2VzKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgIC5hZGRMaWtlKGl0ZW0uX2lkKVxyXG4gICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIGNhcmRJbnN0YW5jZS5jYXJkTGlrZShyZXMubGlrZXMpO1xyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZEluc3RhbmNlLmdlbmVyYXRlQ2FyZCgpO1xyXG4gICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGluaXRpYWwgY2FyZHMgZnJvbSB0aGUgc2VydmVyXHJcbiAgICBhcGlcclxuICAgICAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjb25zdCBpbml0aWFsQ2FyZHNNb2RhbCA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpdGVtczogcmVzLFxyXG4gICAgICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICBpbml0aWFsQ2FyZHNNb2RhbC5hZGRJdGVtKGNhcmRHZW5lcmF0b3IoaXRlbSkpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIFwiLmVsZW1lbnRzXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGluaXRpYWxDYXJkc01vZGFsLnJlbmRlckl0ZW1zKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZENhcmRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwLWNhcmRcIiwgKG9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgIC5hZGROZXdDYXJkKFxyXG4gICAgICAgICAgICAgIG9iamVjdFtcInBvcHVwLWNhcmQtdGl0bGUtaW5wdXRcIl0sXHJcbiAgICAgICAgICAgICAgb2JqZWN0W1wicG9wdXAtY2FyZC1pbWd1cmwtaW5wdXRcIl1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgaW5pdGlhbENhcmRzTW9kYWwucHJlcGVuZEl0ZW0oY2FyZEdlbmVyYXRvcihyZXMpKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gYWRkQ2FyZE1vZGFsLmNsb3NlKCkpXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBhZGRDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgICAgcHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgYWRkQ2FyZE1vZGFsLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpO1xyXG5cclxuLy8gZW5hYmxlIGZvcm0gdmFsaWRhdG9yc1xyXG5jb25zdCBuZXdQbGFjZUZvcm1JbnN0YW5jZSA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzT2JqZWN0LCBuZXdQbGFjZUZvcm0pO1xyXG5uZXdQbGFjZUZvcm1JbnN0YW5jZS5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBwcm9maWxlRm9ybUluc3RhbmNlID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3NPYmplY3QsIHByb2ZpbGVGb3JtKTtcclxucHJvZmlsZUZvcm1JbnN0YW5jZS5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhdmF0YXJFZGl0SW5zdGFuY2UgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5nc09iamVjdCwgYXZhdGFyRWRpdEZvcm0pO1xyXG5hdmF0YXJFZGl0SW5zdGFuY2UuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImRhdGEiLCJ0ZW1wbGF0ZSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwidXNlcklkIiwiaGFuZGxlTGlrZUNsaWNrIiwiZWxlbWVudCIsInJlbW92ZSIsInRoaXMiLCJfaW1hZ2UiLCJsaW5rIiwiX3RpdGxlIiwibmFtZSIsIl9saWtlcyIsImxpa2VzIiwiX3RlbXBsYXRlIiwiX3VzZXJJZCIsIl9pbWFnZU93bmVySWQiLCJvd25lciIsIl9pZCIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9nZXRUZW1wbGF0ZSIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwibGVuZ3RoIiwic3R5bGUiLCJ2aXNpYmlsaXR5IiwiaXNMaWtlZCIsImNsYXNzTGlzdCIsImFkZCIsIl9zZXRFdmVudExpc3RlbmVycyIsIm5ld0xpa2VzIiwibGlrZXNhYm91dCIsImNvbnNvbGUiLCJsb2ciLCJhZGRFdmVudExpc3RlbmVyIiwic29tZSIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5nc09iamVjdCIsImZvcm1FbGVtZW50IiwiX3NldHRpbmdzT2JqZWN0IiwiX2Zvcm1FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsImlucHV0U2VsZWN0b3IiLCJpbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnV0dG9uRWxlbWVudCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJfaXNWYWxpZCIsImVycm9yTWVzc2FnZSIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImVycm9yRWxlbWVudCIsImlkIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaGFzSW52YWxpZElucHV0Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiZXZlbnQiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9jbG9zZVBvcHVwV2l0aE92ZXJsYXkiLCJQb3B1cFdpdGhJbWFnZSIsInRleHQiLCJpbWFnZUVsZW1lbnQiLCJjYXB0aW9uRWxlbWVudCIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRIYW5kbGVyIiwiX2Zvcm0iLCJfc3VibWl0SGFuZGxlciIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0cyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0IiwiUG9wdXBXaXRoQnV0dG9uIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX25hbWVTZWxlY3RvciIsIl9qb2JTZWxlY3RvciIsIl9hdmF0YXJTZWxlY3RvciIsImpvYiIsIm5ld05hbWUiLCJuZXdKb2IiLCJhdmF0YXIiLCJhdmF0YXJVcmwiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsImFwcGVuZCIsInByZXBlbmQiLCJmb3JtU2VsZWN0b3IiLCJwcm9maWxlQWRkQnV0dG9uIiwicHJvZmlsZUF2YXRhckVkaXRCdXR0b24iLCJwcm9maWxlSW5mb0VkaXRCdG4iLCJwcm9maWxlRm9ybSIsImF2YXRhckVkaXRGb3JtIiwibmV3UGxhY2VGb3JtIiwiYXBpIiwiQXBpIiwib3B0aW9ucyIsImJhc2VVcmwiLCJoZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsIl9nZXRSZXNwb25zZURhdGEiLCJ1c2VyTmFtZSIsInVzZXJBYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJpbWFnZVVybCIsImltYWdlTmFtZSIsImltYWdlTGluayIsImNhcmRJZCIsImF1dGhvcml6YXRpb24iLCJlZGl0QXZhdGFyTW9kYWwiLCJ1c2VySW5mb01vZGFsIiwic2V0QXZhdGFySW1hZ2UiLCJjYXRjaCIsImVyciIsImltYWdlTW9kYWwiLCJlZGl0UHJvZmllbE1vZGFsIiwic2V0VXNlckluZm8iLCJzZXRFdmVudExpc3RlbmVycyIsInVzZXJpbmZvIiwiZ2V0VXNlckluZm8iLCJvcGVuIiwiY2FyZEdlbmVyYXRvciIsImNhcmRJbnN0YW5jZSIsImRlbGV0ZUJ1dHRvbk1vZGFsIiwicmVtb3ZlQ2FyZCIsImNhcmREaXNsaWtlIiwiY2FyZExpa2UiLCJnZW5lcmF0ZUNhcmQiLCJpbml0aWFsQ2FyZHNNb2RhbCIsImFkZEl0ZW0iLCJyZW5kZXJJdGVtcyIsImFkZENhcmRNb2RhbCIsIm9iamVjdCIsInByZXBlbmRJdGVtIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=